(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{14:function(e,t,a){e.exports=a(42)},19:function(e,t,a){},20:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(13),l=a.n(c),r=(a(19),a(1)),i=(a(20),a(3)),s=a.n(i),u=(a(38),["\ud83d\ude3b","\ud83d\ude42","\ud83d\ude11","\ud83d\ude2c","\ud83d\ude4a","\ud83d\ude24","\ud83e\udd2c","\ud83e\udd22","\ud83d\udc80"]);function d(e){var t=e.location,a=Object(n.useState)(),c=Object(r.a)(a,2),l=c[0],i=c[1],d=Object(n.useState)(),m=Object(r.a)(d,2),p=m[0],f=m[1],h=Object(n.useState)(),v=Object(r.a)(h,2),b=(v[0],v[1]);return Object(n.useEffect)((function(){var e,a,n=setInterval((function(){i(new Date)}),36e5);return e=t.latitude,a=t.longitude,s.a.get("https://airapi.airly.eu/v2/measurements/nearest",{params:{lat:e,lng:a,maxDistanceKM:10,indexType:"AIRLY_CAQI",apikey:"3Ji1PasWSpiM1FM52Sxh2NQGW409ElPl"},headers:{"Accept-Language":"pl"}}).then((function(e){f({pm25:e.data.current.values[1].value,pm10:e.data.current.values[2].value,description:e.data.current.indexes[0].description,color:e.data.current.indexes[0].color})})).catch((function(e){b(e.message)})),function(){return clearInterval(n)}}),[t,l]),p&&o.a.createElement("div",{className:"air-quality__container"},o.a.createElement("div",{className:"air-quality__description",style:{color:p.color}},"".concat(p.description," ").concat(u[Math.floor(2*p.pm10/50)])),o.a.createElement("div",null,"PM10",o.a.createElement("span",{style:{color:p.color}}," ".concat(Math.round(2*p.pm10),"% ")),"| PM2.5",o.a.createElement("span",{style:{color:p.color}}," ".concat(Math.round(4*p.pm25),"%"))))||o.a.createElement("div",null)}a(39);function m(e){var t=e.location,a=Object(n.useState)(),c=Object(r.a)(a,2),l=c[0],i=c[1],u=Object(n.useState)(),d=Object(r.a)(u,2),m=d[0],p=d[1],f=Object(n.useState)(),h=Object(r.a)(f,2),v=(h[0],h[1]);return Object(n.useEffect)((function(){var e,a,n=setInterval((function(){p(new Date)}),36e5);return e=t.latitude,a=t.longitude,s.a.get("http://api.openweathermap.org/data/2.5/forecast",{params:{lat:e,lon:a,units:"metric",lang:"pl",APPID:"7bec195acf79e266f65c8bf808b61263"}}).then((function(e){i({temp:e.data.list[0].main.temp,description:e.data.list[0].weather[0].description,icon:e.data.list[0].weather[0].icon})})).catch((function(e){v(e.message)})),function(){return clearInterval(n)}}),[t,m]),l&&o.a.createElement("div",{className:"weather__container"},o.a.createElement("div",{className:"weather__temperature"},Math.round(l.temp),"\xb0"),o.a.createElement("div",{className:"weather__aura"},o.a.createElement("img",{src:"http://openweathermap.org/img/wn/".concat(l.icon,"@2x.png")}),o.a.createElement("div",{className:"weather__description"},"  ",l.description)))||o.a.createElement("div",null)}a(40);var p=function(e){var t=e.newFiles,a=Object(n.useState)({children:[]}),c=Object(r.a)(a,2),l=c[0],i=c[1];function u(e){e.stopPropagation();var t=e.currentTarget.className;e.currentTarget.className="download-list__folder folder--closed"===t?"download-list__folder folder--open":"download-list__folder folder--closed"}return Object(n.useEffect)((function(){console.log("refetch"),s.a.get("/download").then((function(e){if(!e.data)throw e;i(e.data)})).catch((function(e){console.log("catched: ",e.data)}))}),[t]),o.a.createElement("div",{className:"Download"},o.a.createElement("ul",{className:"download-list"},function e(t){var a=[],n=[];return t.children.map((function(t,c){"directory"===t.type?a.push(o.a.createElement("ul",{className:"download-list__folder folder--closed",key:t.path,onClick:u},o.a.createElement("p",{onClick:function(){}},t.name),e(t))):n.push(o.a.createElement("li",{className:"download-list__files",key:t.path,onClick:function(){var e;e=t.path,s.a.post("/file",{filePath:e},{headers:{responseType:"blob"}}).then((function(e){console.log(e.data)})).catch((function(e){console.log("catched: ",e.data)}))}},o.a.createElement("p",null,o.a.createElement("em",null,t.name))))})),[].concat(a,n)}(l)))};a(41);var f=function(e){var t=e.newFileUploaded,a=Object(n.useState)(!0),c=Object(r.a)(a,2),l=c[0],i=c[1],u=Object(n.useState)({amount:0,size:0}),d=Object(r.a)(u,2),m=d[0],p=d[1],f=Object(n.useState)([]),h=Object(r.a)(f,2),v=h[0],b=h[1],E=l?"upload-form__input-browse":"upload-form__input-upload";return o.a.createElement("div",{className:"Upload"},o.a.createElement("div",{className:"file-info"},m.amount," files chosen ",o.a.createElement("br",null),m.size," total size"),o.a.createElement("form",{className:"upload-form",method:"POST",action:"/upload",encType:"multipart/form-data",onSubmit:function(e){e.preventDefault();var a=new FormData(e.target),n=!0,o=!1,c=void 0;try{for(var l,r=v[Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var i=l.value,u=i.webkitRelativePath;u=u.slice(0,-i.name.length),a.append("paths",u)}}catch(d){o=!0,c=d}finally{try{n||null==r.return||r.return()}finally{if(o)throw c}}s.a.post("/upload",a).then((function(e){if(!e.data.success)throw e;t(!0),console.log("res:  ",e.data.success)})).catch((function(e){console.log("catched: ",e.response.data)}))}},o.a.createElement("label",{className:"upload-form__label",htmlFor:E},l&&o.a.createElement("p",null,"wybierz",o.a.createElement("br",null),"folder")||o.a.createElement("p",null,"wy\u015blij")),o.a.createElement("input",{id:"upload-form__input-browse",className:"upload-form__input-browse",name:"upload",type:"file",webkitdirectory:"true",mozdirectory:"true",onChange:function(e){var t=e.target.files,a=0;Array.prototype.forEach.call(t,(function(e){return a+=e.size})),a=parseInt(a/1e4)/100+" MB",b(t),p({size:a,amount:t.length}),i(!1)}}),o.a.createElement("input",{id:"upload-form__input-upload",className:"upload-form__input-upload",type:"submit",disabled:l})))};var h=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)({latitude:50.0438756,longitude:19.957271}),i=Object(r.a)(l,2),s=i[0],u=i[1];return Object(n.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,a=t.latitude,n=t.longitude;u({latitude:a,longitude:n})}))}),[]),o.a.createElement("div",{className:"App"},s&&o.a.createElement("div",{className:"outside-data__contaier"},o.a.createElement(d,{location:s}),o.a.createElement(m,{location:s})),o.a.createElement(f,{newFileUploaded:function(e){c(!0)}}),o.a.createElement(p,{newFiles:a}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(h,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[14,1,2]]]);
//# sourceMappingURL=main.3d53fb47.chunk.js.map